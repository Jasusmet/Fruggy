<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Productos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<section th:fragment="catalogoProductos">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-5">
                <div class="sidebar">
                    <div class="sidebar__item">
                        <h5 th:text="#{search.subcategories}">Buscar por Subcategorías</h5>
                        <ul>
                            <li th:each="categoria: ${categorias}">
                                <a th:text="${categoria.tipo}"></a>
                            </li>
                        </ul>
                        <button onclick="myFunction()" id="mas__subcategorias" th:text="#{show.more}">
                            Mostrar más
                        </button>
                        <spad id="more">
                            <ul th:each="subcategoria: ${subcategorias}">
                                <a th:text="${subcategoria.tipo}"></a>
                            </ul>
                        </spad>
                    </div>
                    <div class="sidebar__item sidebar__item__color--option">
                        <h4 th:text="#{supermarket}">Supermercado</h4>
                        <div class="sidebar__item__color" th:each="supermercado : ${supermercados}">
                            <label th:for="${supermercado.nombreSuper}" th:text="${supermercado.nombreSuper}">
                                <input type="radio" th:id="${supermercado.nombreSuper}" name="supermarket"
                                       th:value="${supermercado.nombreSuper}" onclick="filterBySupermarket()">
                            </label>
                        </div>
                    </div>
                    <div class="col-lg-9 col-md-7">
                        <button id="hide" th:text="#{hide.discounts}">Ocultar descuentos</button>
                        <button id="show" th:text="#{show.discounts}">Mostrar descuentos</button>
                        <div class="product__discount">
                            <div class="section-title product__discount__title">
                                <h2 th:text="#{flash.discounts}">Descuentos flash</h2>
                            </div>
                            <div class="row">
                                <div class="product__discount__slider owl-carousel">
                                    <div class="col-lg-4" th:each="producto : ${productosConDescuento}">
                                        <div class="product__discount__item">
                                            <div class="product__discount__item__pic set-bg"
                                                 th:style="'background-image: url(' + ${producto.pathImagen} + ');'">
                                                <div class="product__discount__percent"
                                                </div>
                                                <ul class="product__item__pic__hover">
                                                    <li><a href="#"><i class="fa fa-heart"></i></a></li>
                                                    <li><a href="#"><i class="fa fa-retweet"></i></a></li>
                                                    <li><a href="#"><i class="fa fa-shopping-cart"></i></a></li>
                                                </ul>
                                            </div>
                                            <div class="product__discount__item__text">
                                                <span th:text="${producto.nombreProducto}">Nombre del producto</span>
                                                <h5>
                                                    <a href="#" th:text="${producto.subcategoria.tipo}">Nombre de la
                                                        subcategoría</a>
                                                </h5>
                                                <h7 th:text="${producto.descuento.descuentoTipoDescuento.tipo}">Tipo de
                                                    descuento
                                                </h7>
                                                <div class="product__item__price">
                                                    <span th:text="${producto.productoPrecios.precio}">Precio original</span>
                                                    <span th:text="${producto.precioConDescuento}">Precio con descuento</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<section class="product spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-5">
                <div class="sidebar">
                    <div class="sidebar__item">
                        <h5 th:text="#{search.subcategories}">Buscar por Subcategorías</h5>
                        <ul>
                            <li th:each="subcategoria : ${subcategorias}">
                                <a th:href="@{/Categorias/Categoria_{subcategoriaId}(subcategoriaId=${subcategoria.id})}"
                                   th:text="${subcategoria.tipo}"></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="sidebar__item sidebar__item__color--option">
                <h4 th:text="#{supermarket}">Supermercado</h4>
                <div th:each="supermercado : ${supermercados}">
                    <div class="sidebar__item__color" th:classappend="${supermercado.nombreSuper == 'Carrefour'} ? 'sidebar__item__color--blue' :
            ${supermercado.nombreSuper == 'Hacendado'} ? 'sidebar__item__color--green' :
            ${supermercado.nombreSuper == 'Dia'} ? 'sidebar__item__color--yellow' : ''">
                        <label th:for="${supermercado.nombreSuper}"
                               th:text="${supermercado.nombreSuper}">
                            <input type="radio" th:id="${supermercado.nombreSuper}"
                                   th:name="'supermarket'"
                                   th:value="${supermercado.nombreSuper}"
                                   onclick="filterBySupermarket()">
                        </label>
                    </div>
                </div>
            </div>
            <div class="col-lg-9 col-md-7">
                <div class="product__list">
                    <div class="row" id="productList" th:each="product : ${products}">
                        <div class="col-lg-4 col-md-6 col-sm-6">
                            <div class="product__item">
                                <div class="product__item__pic set-bg"
                                     th:style="'background-image: url(' + ${product.imagen.pathImagen} + ');'"
                                     th:alt="${product.nombreProducto}">
                                    <div class="product__item__pic__hover">
                                        <a th:href="@{/details/{id}(id=${product.id})}" class="add-cart"
                                           th:text="#{add.to.cart}">Añadir al carrito</a>
                                        <a th:href="@{/details/{id}(id=${product.id})}" class="view"
                                           th:text="#{view.details}">Ver Detalles</a>
                                    </div>
                                </div>
                                <div class="product__item__text">
                                    <h6 th:text="${product.nombreProducto}">Nombre del Producto</h6>
                                    <h5 th:text="${product.productoPrecios.precio}">Precio</h5>
                                    <h5 th:text="${product.supermercado.nombreSuper}">Supermercado</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

</body>
</html>
